# 实验二 四位二进制乘法器
## 设计思路

设计一个乘法器，实现两个4位二进制数的乘法。两个二进制数分别是被乘数A3A2A1A0和乘数B3B2B1B0。

将乘法运算分解为加法运算和移位运算，将每次相加的结果用部分积Ti表示，由于被乘数和乘数都是二进制，利用移位相加方法，所以利用乘数从第一位到最后一位每一位依次与被乘数相乘，从第二位开始每一位都要依次左移一位，形成一个阵列的式。

## 顶层原理图

<img src="2-1.png" style="zoom: 45%;" />
<div style="page-break-after:always;"></div>
## 程序代码清单
#### 1.芯片代码
```vhdl
MODULE M
A1..A4,B1..B4 PIN;
Q1..Q8 PIN ISTYPE 'COM';
Q=[Q8..Q1];
T1=[0,0,0,0,A4*B1,A3*B1,A2*B1,A1*B1];
T2=[0,0,0,A4*B2,A3*B2,A2*B2,A1*B2,0];
T3=[0,0,A4*B3,A3*B3,A2*B3,A1*B3,0,0];
T4=[0,A4*B4,A3*B4,A2*B4,A1*B4,0,0,0];

EQUATIONS
Q=T1+T2+T3+T4;
END 
```


#### 2.仿真代码

```vhdl
MODULE MULT

A3..A0,B3..B0,Q7..Q0 PIN;
V=.X.;
A=[A3..A0];
B=[B3..B0];
Q=[Q7..Q0];

TEST_VECTORS

([A,B]->[Q])
[2,9]->[V];
[10,5]->[V];
[6,3]->[V];
[7,3]->[V];
[3,8]->[V];

END
```
<div style="page-break-after:always;"></div>

## 仿真波形

<img src="2-2.png" style="zoom: 48%;" />

A3A2A1A0表示四位二进制逻辑变量A，B3B2B1B0表示四位二进制逻辑变量B；

Q7Q6Q5Q4Q3Q2Q1Q0表示乘法结果逻辑变量Q，高电平为1，低电平为0。

测试数据如下图所示，经验算结果正确，四位二进制乘法器设计仿真成功。


| 序号 |  A   |  B   |  Q   |
| :--: | :--: | :--: | :--: |
|  1   |  2   |  9   |  18  |
|  2   |  10  |  5   |  50  |
|  3   |  6   |  3   |  18  |
|  4   |  7   |  3   |  21  |
|  5   |  3   |  8   |  24  |


## 实验总结

1. 本次实验利用ABEL-HDL语言实现了4位二进制乘法器的设计与仿真，进一步熟悉了ISPLEVER的使用，掌握了利用ispLEVER设计组合型逻辑电路的方法，学会了操作仿真波形使其更加直观显示结果的方法。
2. MODULE M依照竖式的计算过程实现，四位乘法器主要运用错位相加运算来实现乘法运算。
3. 通过本次实验，掌握了二进制数乘法的原理和运算方法，以及移位相加法的使用。